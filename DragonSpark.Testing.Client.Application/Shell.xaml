<ds:Shell x:Class="DragonSpark.Testing.Client.Application.Shell"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	Height="403" Width="546"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:ds="http://framework.dragonspark.us"
	xmlns:xfr="http://framework.dragonspark.us/forms/rendering"
	xmlns:forms="http://xamarin.com/schemas/2014/forms"
	xmlns:mui="http://firstfloorsoftware.com/ModernUI"
	xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
	xmlns:dragonSpark="clr-namespace:DragonSpark;assembly=DragonSpark"
	xmlns:interaction="clr-namespace:DragonSpark.Application.Client.Forms.Interaction;assembly=Xamarin.Forms.Platform.WP8"
	mc:Ignorable="d"
	d:DataContext="{d:DesignInstance d:Type=xfr:PlatformModel}"
	DataContext="{ds:Locate Type=xfr:PlatformModel}"
	TitleLinks="{Binding Application.Items, Converter={x:Static ds:ShellLinksConverter.Instance}}"
	LogoContent="{Binding Item.Value, ElementName=Image}"
>
	<i:Interaction.Behaviors>
		<interaction:Host x:Name="Image" Item="{Binding Application.Logo, Converter={x:Static xfr:ImageConverter.Instance}}" />
	</i:Interaction.Behaviors>
	<mui:ModernWindow.Title>
		<MultiBinding StringFormat="{}{0}: {1}">
			<Binding Source="{ds:Locate dragonSpark:ApplicationProfile}" Path="Title" />
			<Binding ElementName="ContentHost" Path="Content.(xfr:ShellProperties.Title)" />
		</MultiBinding>
	</mui:ModernWindow.Title>
	<ds:Shell.LogoContentTemplate>
		<DataTemplate DataType="ImageSource">
			<Border Width="36" Height="{Binding Width, RelativeSource={RelativeSource Self}}" Padding="2" Margin="8,0" DataContext="{Binding}" Visibility="{Binding Converter={StaticResource NullToVisibilityConverter}, ConverterParameter=inverse}">
				<Image Stretch="Uniform" Source="{Binding}" ToolTipService.ToolTip="{Binding Title, Source={ds:Locate dragonSpark:ApplicationProfile}}" />
			</Border>
		</DataTemplate>
	</ds:Shell.LogoContentTemplate>
	<Grid>
		<mui:TransitioningContentControl x:Name="ContentHost" Content="{Binding Content, ElementName=Monitor}">
			<i:Interaction.Behaviors>
				<ds:ActualSizeBehavior ActualSize="{Binding Size, Mode=OneWayToSource}" />
				<ds:ContentMonitorBehavior x:Name="Monitor" Content="{Binding Content}" />
			</i:Interaction.Behaviors>
		</mui:TransitioningContentControl>
		<ds:ApplicationBar DataContext="{ds:Locate xfr:ApplicationBarModel}" d:DataContext="{d:DesignInstance d:Type=xfr:ApplicationBarModel}" ItemsSource="{Binding Primary}" MenuItemsSource="{Binding Secondary}" VerticalAlignment="Bottom">
			<ds:ApplicationBar.ItemTemplate>
				<DataTemplate DataType="forms:ToolbarItem">
					<ds:ApplicationBarIconButton ImageSource="{Binding Item.Value, ElementName=Image}" Content="{Binding Text}" Command="{x:Static xfr:ExecuteToolbarItemCommand.Instance}" CommandParameter="{Binding}">
						<i:Interaction.Behaviors>
							<interaction:Host x:Name="Image" Item="{Binding Icon, Converter={x:Static xfr:ImageConverter.Instance}}" />
						</i:Interaction.Behaviors>
					</ds:ApplicationBarIconButton>
				</DataTemplate>
			</ds:ApplicationBar.ItemTemplate>
			<ds:ApplicationBar.MenuItemTemplate>
				<DataTemplate DataType="forms:ToolbarItem">
					<ds:ApplicationBarMenuItem Content="{Binding Text}" Command="{x:Static xfr:ExecuteToolbarItemCommand.Instance}" CommandParameter="{Binding}" />
				</DataTemplate>
			</ds:ApplicationBar.MenuItemTemplate>
		</ds:ApplicationBar>
	</Grid>
</ds:Shell>