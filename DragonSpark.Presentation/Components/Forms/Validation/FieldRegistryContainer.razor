<CascadingValue Value="@_registry" ChildContent="@_content" IsFixed="true" />

@code {
    FieldRegistry _registry = null!;
    RenderFragment? _content;

    [CascadingParameter]
    EditContext? EditContext
    {
        get;
        set
        {
            if (field != value)
            {
                if (field is not null)
                {
                    _registry.Clear();
                }

                if ((field = value) is not null)
                {
                    _registry = new FieldRegistry();
                    _content  = ChildContent(_registry);
                }
            }
        }
    }

    [Parameter]
    public RenderFragment<FieldRegistry> ChildContent { get; set; } = null!;
}